<OfferedProducts />

<div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5">
  {{#each @searchFilteredProducts as |product|}}
    <LinkTo @route="product" @model="{{product.id}}">
      <div class="card bg-base-100 shadow-md hover:shadow-xl transition-shadow duration-300 relative cursor-pointer hover:bg-base-300 p-4 rounded">
        <figure class="p-4">
          <img src={{product.thumbnail}} alt={{product.title}} class="rounded-xl h-40 object-cover w-full" />
        </figure>
        {{#if (this.isLoggedIn)}}
        <FavIcon @prod={{product}} @notify={{this.triggerToast}} />
        {{/if}}

        {{#if this.showToast}}
          <Toast @msg={{this.toastMsg}}/>
        {{/if}}


        <div class="card-body p-4">
          <h2 class="card-title text-sm font-semibold">
            {{product.title}}
            {{#if (this.prodIsInOffer product.id)}}
              <div class="badge badge-secondary text-xs">-{{product.discountPercentage}}%</div>
            {{/if}}
          </h2>
          <p class="text-xs line-clamp-2">{{product.description}}</p>
          <div class="mt-2">
            <span class="text-primary font-bold text-lg">${{product.price}}</span>
          </div>
          {{#if (this.isLoggedIn)}}
          <div class="card-actions mt-3">
            <button class="btn btn-sm btn-primary btn-block" type="button">Add to Cart</button>
          </div>
          {{/if}}
        </div>
      </div>
    </LinkTo>
  {{/each}}
</div>
